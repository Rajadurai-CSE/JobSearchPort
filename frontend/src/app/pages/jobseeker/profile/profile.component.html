<app-navbar></app-navbar>

<div class="page-container">
    <div class="page-header">
        <h1>My Profile</h1>
        <p>Manage your personal information and resume</p>
    </div>

    <!-- Toast -->
    <div *ngIf="message" class="toast" [ngClass]="messageType === 'success' ? 'alert-success' : 'alert-danger'">
        {{ message }}
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="loading">
        <div class="spinner"></div>
    </div>

    <!-- Profile Card -->
    <div *ngIf="!loading" class="profile-card">
        <div class="profile-header">
            <div class="profile-avatar">{{ formData.name.charAt(0) || '?' }}</div>
            <div>
                <h2>{{ formData.name || 'Your Name' }}</h2>
                <p class="text-muted">{{ authService.getUser()?.email }}</p>
            </div>
            <button class="btn btn-outline" (click)="toggleEdit()">
                {{ editMode ? 'Cancel' : 'Edit Profile' }}
            </button>
        </div>

        <form *ngIf="editMode" (ngSubmit)="saveProfile()">
            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">Full Name *</label>
                    <input type="text" class="form-control" [(ngModel)]="formData.name" name="name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-control" [(ngModel)]="formData.phone" name="phone">
                </div>
            </div>

            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">Location</label>
                    <input type="text" class="form-control" [(ngModel)]="formData.location" name="location"
                        placeholder="City, State">
                </div>
                <div class="form-group">
                    <label class="form-label">Experience (years)</label>
                    <input type="number" class="form-control" [(ngModel)]="formData.experience" name="experience"
                        min="0" max="50" placeholder="0">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Skills (comma-separated)</label>
                <input type="text" class="form-control" [(ngModel)]="formData.skills" name="skills"
                    placeholder="JavaScript, Python, React">
            </div>

            <div class="form-group">
                <label class="form-label">Certifications</label>
                <input type="text" class="form-control" [(ngModel)]="formData.certifications" name="certifications"
                    placeholder="AWS Certified, Google Cloud...">
            </div>

            <div class="form-group">
                <label class="form-label">Resume URL</label>
                <input type="url" class="form-control" [(ngModel)]="formData.resumeUrl" name="resumeUrl"
                    placeholder="https://...">
            </div>

            <button type="submit" class="btn btn-primary" [disabled]="saving">
                {{ saving ? 'Saving...' : 'Save Changes' }}
            </button>
        </form>

        <div *ngIf="!editMode" class="profile-info">
            <div class="info-row" *ngIf="formData.phone">
                <span class="info-label">Phone</span>
                <span>{{ formData.phone }}</span>
            </div>
            <div class="info-row" *ngIf="formData.location">
                <span class="info-label">Location</span>
                <span>{{ formData.location }}</span>
            </div>
            <div class="info-row" *ngIf="formData.skills">
                <span class="info-label">Skills</span>
                <span>{{ formData.skills }}</span>
            </div>
            <div class="info-row" *ngIf="formData.experience">
                <span class="info-label">Experience</span>
                <span>{{ formData.experience }} years</span>
            </div>
            <div class="info-row" *ngIf="formData.certifications">
                <span class="info-label">Certifications</span>
                <span>{{ formData.certifications }}</span>
            </div>
            <div class="info-row" *ngIf="formData.resumeUrl">
                <span class="info-label">Resume</span>
                <a [href]="formData.resumeUrl" target="_blank">View Resume</a>
            </div>
        </div>
    </div>
</div>